@font-face {
    font-family: 'Adwaita';
    font-display: swap;
    src: url('../../fonts/Adwaita/AdwaitaSans-Regular.ttf') format('truetype');
    font-weight: 400;
}

* {
    transition: none;
}

/* Force GTK-style cursor behavior in Electron (no pointer hand) */
button,
.window-control,
#mediaWindowPlayButton,
.title-button,
.display-select,
.file-input-label,
.loop-control,
.switch,
.switch-track,
.switch-thumb,
#mdLpCtlr,
.tab,
.tabs input[type="radio"],
.hamburger-menu,
.gtk-dropdown .menu-item,
video,
video::-webkit-media-controls-panel,
video::-webkit-media-controls-play-button,
video::-webkit-media-controls-volume-slider,
video::-webkit-media-controls-mute-button,
video::-webkit-media-controls-timeline,
video::-webkit-media-controls-timeline-container,
video::-webkit-media-controls-volume-control-container,
video::-webkit-media-controls-volume-control-hover-background,
video::-webkit-media-controls-current-time-display,
video::-webkit-media-controls-time-remaining-display,
video::-webkit-media-controls-fullscreen-button,
video::-webkit-media-controls-toggle-closed-captions-button,
.timeline-slider,
.timeline-slider::-webkit-slider-thumb,
.gtk-volume-slider-vertical,
.gtk-volume-slider-vertical::-webkit-slider-thumb {
    cursor: default !important;
}

/* Button and clickable elements */
button,
.window-control,
#mediaWindowPlayButton,
.title-button {
    transition: background-color 75ms cubic-bezier(0, 0, 0.2, 1);
}

/* Dropdown/Combobox */
.display-select {
    transition: background-color 75ms cubic-bezier(0, 0, 0.2, 1);
}

/* Switch/Toggle transitions */
.switch-track,
.switch-thumb {
    transition: background-color 100ms cubic-bezier(0, 0, 0.2, 1);
}

.switch input:checked+.switch-track+.switch-thumb {
    transition: transform 100ms cubic-bezier(0, 0, 0.2, 1);
}

/* Tab transitions */
.tab {
    transition: background-color 75ms cubic-bezier(0, 0, 0.2, 1);
}

/* Focus outline */
:focus-visible {
    transition: outline-color 75ms cubic-bezier(0, 0, 0.2, 1);
}

:root {
    --accent-bg-color: #3584e4;
    --accent-bg-color-hover: #1c71d8;
    --window-bg-color: #f6f5f4;
    --card-bg-color: #ffffff;
    --border-color: #d3d3d3;
    --window-fg-color: #2e3436;
    --view-bg-color: #ffffff;
    --view-fg-color: rgb(0 0 6 / 80%);
    --headerbar-bg-color: #ffffff;
    --headerbar-fg-color: rgb(0 0 6 / 80%);
    --headerbar-backdrop-color: #fafafb;
    --headerbar-shade-color: rgb(0 0 6 / 12%);
    --card-shade-color: rgb(0 0 6 / 7%);
    --adw-radius-sm: 6px;
    --adw-radius-lg: 12px;
    --adw-spacing: 24px;
    --spacing-xxs: 2px;
    --spacing-xs: 4px;
    --spacing-s: 8px;
    --spacing-m: 12px;
    --spacing-l: 16px;
    --spacing-xl: 24px;
    --spacing-xxl: 32px;
}

/* Grid layout */
.index-grid-container {
    display: grid;
    grid-template: "main main" auto "main main" auto "footerBar footerBar" auto / 1fr 1fr;
    min-width: 100vw;
    min-height: 100vh;
}

.window-container {
    position: absolute;
    top: 8px;
    left: 8px;
    right: 8px;
    bottom: 8px;
    background: var(--window-bg-color);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 0 8px 2px rgba(0, 0, 0, 0.15),
        0 0 0 1px rgba(0, 0, 0, 0.1);
}

.window-container.maximized {
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 0;
    box-shadow: none;
}

.window-container.maximized .headerbar {
    border-radius: 0;
}

.window-container.maximized .headerbar {
    top: 0;
    left: 0;
    right: 0;
    border-radius: 0;
}

/* For touching one edge - keep radius, no shadow */
.window-container.touching {
    box-shadow: none;
}

.window-container.maximized .headerbar,
.window-container.tiled .headerbar {
    border-radius: 0;
}

/* Base styles */
body {
    user-select: none;
    overflow-y: auto;
    font-family: "Adwaita";
    color: var(--window-fg-color);
    margin: 0;
    padding: 0;
    color-scheme: light dark;
    border-radius: 12px;
    overflow: hidden;
}

/* Form elements */
button,
input,
textarea {
    font-family: inherit;
    font-size: 14px;
}

/* Layout elements */
main {
    grid-area: main;
    border-bottom-left-radius: 12px;
    border-bottom-right-radius: 12px;
    margin-top: 57px;
    /* Height of headerbar */

}

footer {
    grid-area: footerBar;
}

.media-container {
    background: var(--window-bg-color);
    padding: 16px 24px;
    height: calc(100vh - 45px - 37px - 32px);
    display: flex;
    flex-direction: row;
    /* Horizontal layout */
    gap: 24px;
    /* Space between video and control panel */
    margin-top: 37px;
    border-bottom-left-radius: 12px;
    border-bottom-right-radius: 12px;
}

.control-group {
    max-width: 280px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.control-label {
    font-weight: 700;
    color: var(--window-fg-color);
    font-size: 14px;
}

.control-panel {
    background: var(--card-bg-color);
    border-radius: 12px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
    width: 300px;
    height: auto;
    flex-shrink: 0;
    overflow-y: auto;
    margin-left: auto;
    order: 2;
    position: relative;
    /* For absolute positioning of children */
}

/* File input */
.file-input-group {
    position: relative;
}

.file-input-label {
    cursor: pointer;
    font-weight: 400;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    border: 1px solid var(--border-color);
    border-radius: var(--adw-radius-sm);
    background: var(--card-bg-color);
    /* Flat, not gradient */
    transition: all 0.2s ease;
    min-height: 36px;
    width: 100%;
    box-sizing: border-box;
    overflow: hidden;
}

.file-input-label:hover {
    background: color-mix(in srgb, var(--card-bg-color) 95%, var(--window-fg-color));
}

.file-input-label:active {
    background: color-mix(in srgb, var(--card-bg-color) 90%, var(--window-fg-color));
}

.file-input-label span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex: 1;
}


.file-input-label svg {
    flex-shrink: 0;
    width: 16px;
    height: 16px;
    color: var(--window-fg-color);
}

.file-input {
    position: absolute;
    pointer-events: none;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
}

/* Display select */
.display-select {

    appearance: none;
    width: 100%;
    padding: 8px 12px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--card-bg-color);
    color: var(--window-fg-color);
    font-size: 14px;
    line-height: 1.5;
    cursor: pointer;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%232e3436' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M3.5 6.5l4.5 4.5 4.5-4.5'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 36px;
    transition: all 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.display-select:hover {
    border-color: var(--border-color);
    background-color: color-mix(in srgb, var(--card-bg-color) 95%, var(--window-fg-color));
}

/* Loop control */
.loop-control {

    display: flex;
    align-items: center;
    justify-content: space-between;
}

.switch {

    position: relative;
    display: inline-block;
    width: 48px;
    height: 26px;
}


.switch-track {
    cursor: pointer;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: color-mix(in srgb, currentColor 20%, transparent);
    border-radius: 13px;
    transition: 0.2s;
}

.switch input:checked+.switch-track {
    background-color: var(--accent-bg-color);
}

.switch-thumb {

    position: absolute;
    height: 22px;
    width: 22px;
    left: 2px;
    bottom: 2px;
    background-color: white;
    border-radius: 50%;
    transition: 0.2s;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.switch input:checked+.switch-track {

    background-color: var(--accent-bg-color);
}

.switch input:checked+.switch-track+.switch-thumb {

    transform: translateX(22px);
}

/* Button styling */
#mediaWindowPlayButton {

    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 6px 14px;
    border-radius: 6px;
    background: transparent;
    border: 1px solid color-mix(in srgb, CanvasText 15%, transparent);
    color: CanvasText;
    font-size: 14px;
    border-radius: var(--adw-radius-sm);
    font-weight: normal;
    transition: background-color 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    width: auto;
    align-self: flex-end;
    margin-right: 8px;

}

#mediaWindowPlayButton:hover {
    background: color-mix(in srgb, CanvasText 10%, transparent);
}

#mediaWindowPlayButton:active {
    background: color-mix(in srgb, CanvasText 15%, transparent);
    border-color: color-mix(in srgb, CanvasText 20%, transparent);
}

#mediaWindowPlayButton svg {
    width: 16px;
    height: 16px;
}

video {}

/* Video area */
.video-wrapper {
    background: black;
    margin-top: 0;
    overflow: hidden;
    flex: 1;
    position: relative;
    height: 100%;
}

#preview {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    background: black;
    contain: strict;
    will-change: transform;
    border-radius: 12px;
}

#preview video::-webkit-media-controls-panel {
    display: flex !important;
    opacity: 1 !important;
}

/* Timer display */
#mediaCntDn {
    margin-top: auto;
    /* Push to bottom of flex container */
    padding: 16px 0;
    font-size: 11pt;
    width: 100%;
    display: flex;
    justify-content: center;
    text-align: center;
    color: var(--window-fg-color);
    font-family: "Adwaita";
    font-weight: 400;
    font-feature-settings: "tnum" 1, "ss01" 1;
}

/* Focus styles */
button:focus-visible,
.file-input-label:focus-visible,
.display-select:focus-visible,
.switch input:focus-visible+.switch-track {
    outline: 2px solid var(--accent-bg-color);
    outline-offset: 2px;
}

.headerbar {
    /* REMOVE the gradient and hardcoded colors */
    background: var(--headerbar-bg-color);
    color: var(--headerbar-fg-color);
    border-bottom: 1px solid var(--border-color);
    padding: 6px;
    padding-bottom: 0px;
    margin-top: -1px;
    height: 45px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    -webkit-app-region: drag;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    /* Lighter shadow */
    position: fixed;
    top: 0px;
    left: 8px;
    right: 8px;
    z-index: 1000;
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
    font-weight: 400;
    /* Normal weight, not 700 */
    font-size: 14px;
}

@media (prefers-color-scheme: dark) {
    :root {
        --window-bg-color: #222226;
        --window-fg-color: #ffffff;
        --view-bg-color: #1d1d20;
        --view-fg-color: #ffffff;
        --card-bg-color: rgb(255 255 255 / 8%);
        --card-fg-color: #ffffff;
        --headerbar-bg-color: #2e2e32;
        --headerbar-fg-color: #ffffff;
        --headerbar-backdrop-color: #222226;
        --headerbar-shade-color: rgb(0 0 6 / 36%);
        --card-shade-color: rgb(0 0 6 / 36%);
        --border-color: color-mix(in srgb, currentColor 15%, transparent);
    }
}

.headerbar-center {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    height: 100%;
    display: flex;
    align-items: stretch;
}

.headerbar-start {
    display: flex;
    align-items: stretch;
    height: 100%;
}

.headerbar-end {
    display: flex;
    align-items: center;
    gap: 12px;
    padding-right: 6px;
}

.tabs {

    display: flex;
    align-items: stretch;
    height: 100%;
    margin: 0;
    -webkit-app-region: no-drag;
    gap: 2px;
    padding: 0 6px;
}

.tabs input[type="radio"] {

    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
    margin: 0;
}

.tab {

    padding: 0 16px;
    height: calc(100% - 6px);
    margin-top: 6px;
    display: flex;
    align-items: center;
    color: color-mix(in srgb, CanvasText 80%, transparent);
    border-radius: 6px 6px 0 0;
    font-size: 14px;
    transition: all 0.2s ease;
}

.tabs input[type="radio"]:checked+.tab {

    color: CanvasText;
    background: color-mix(in srgb, CanvasText 8%, transparent);
}

.tab:hover:not(:checked + .tab) {

    background: color-mix(in srgb, CanvasText 5%, transparent);
}

.window-controls {
    display: flex;
    gap: 2px;
    -webkit-app-region: no-drag;
}

.window-control {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    border: none;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    color: currentColor;
    /* This will inherit from headerbar color */
    transition: all 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.window-control:hover {
    background: color-mix(in srgb, CanvasText 10%, transparent);
}

.window-control.close:hover {
    background: #e01b24;
}

.window-control svg {
    color: currentColor;
    fill: none;
    /* For the close button X */
    stroke: currentColor;
    /* For the close button X */
}

.window-control svg path {
    fill: currentColor;
}

.window-control:hover {
    background: rgba(255, 255, 255, 0.1);
}

.window-control.close:hover {
    background: #e01b24;
}

#mediaWindowPlayButton {
    font-weight: 400;
    -webkit-app-region: no-drag;
    padding: 6px 14px;
    border-radius: 6px;
    border: 1px solid color-mix(in srgb, CanvasText 15%, transparent);
    background: transparent;
    color: CanvasText;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

#mediaWindowPlayButton:hover {
    background: color-mix(in srgb, CanvasText 10%, transparent);
}

.window-title {
    font-size: 14px;
    font-weight: normal;
    margin: 0;
    color: #ffffff;
    user-select: none;
}

.file-input {

    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
}

.title-button {
    background: none;
    border: none;
    padding: 6px 8px;
    border-radius: 6px;
    display: flex;
    flex-direction: column;
    align-items: start;
    color: inherit;
    cursor: pointer;
    -webkit-app-region: no-drag;
    position: relative;
    min-width: 200px;
}

.title-button:hover {
    background: color-mix(in srgb, CanvasText 10%, transparent);
}

.display-select {
    width: 100%;
    padding: 8px 16px 8px 40px;
    /* Increased left padding for icon */
    border: 1px solid var(--border-color);
    border-radius: var(--adw-radius-sm);
    background-color: var(--card-bg-color);
    background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='currentColor' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round' d='M2.5 3.5h11a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1z'/%3E%3Cpath stroke='currentColor' stroke-width='1.5' stroke-linecap='round' d='M5.5 12.5h5'/%3E%3C/svg%3E"),
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%232e3436' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M3.5 6.5l4.5 4.5 4.5-4.5'/%3E%3C/svg%3E");
    background-position: 12px center, right 8px center;
    background-repeat: no-repeat, no-repeat;
    background-size: 16px, 16px;
    color: var(--window-fg-color);
    appearance: none;
}

/* Style for dropdown options */
.display-select option {
    color: var(--window-fg-color);
    background: var(--card-bg-color);
}

.url-input {
    width: 100%;
    padding: 8px 12px;
    font-size: 14px;
    border: 1px solid var(--border-color);
    border-radius: var(--adw-radius-sm);
    background: var(--card-bg-color);
    color: var(--window-fg-color);
    transition: all 0.2s ease;
}

.url-input:focus {
    border-color: var(--accent-bg-color);
    outline: none;
}

.url-input::placeholder {
    color: #888;
}

.volume-control {
    display: flex;
    align-items: center;
}

.volume-slider {
    width: 150px;
    margin-left: 10px;
}

:focus-visible {
    outline: 2px solid var(--accent-bg-color);
    outline-offset: -1px;
    border-radius: var(--adw-radius-sm);
}

.hamburger-menu {
    width: 28px;
    height: 28px;
    padding: 6px;
    border-radius: 50%;
    border: none;
    background: transparent;
    color: currentColor;
    -webkit-app-region: no-drag;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
    margin-right: 4px;
}

.hamburger-menu:hover {
    background: color-mix(in srgb, CanvasText 10%, transparent);
}

.hamburger-menu:active {
    background: color-mix(in srgb, CanvasText 15%, transparent);
}

.hamburger-menu svg {
    width: 16px;
    height: 16px;
}

.hidden {
    display: none;
}

.gtk-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    background: #2E3436;
    /* Dark background (Adwaita dark) */
    border: 1px solid #4C5157;
    /* Dark border */
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.6);
    border-radius: 8px;
    padding: 8px 0;
    z-index: 1000;
    list-style: none;
    margin: 8px 0 0;
    width: 200px;
    font-family: "Adwaita", sans-serif;
    font-size: 14px;
}

/* Light mode adaptation */
@media (prefers-color-scheme: light) {
    .gtk-dropdown {
        background: #f6f5f4;
        /* Light background (Adwaita light) */
        border: 1px solid #d3d7cf;
        /* Light border */
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.15);
    }

    .gtk-dropdown .menu-item {
        color: #2e3436;
        /* Dark text color */
    }

    .gtk-dropdown .menu-item:hover {
        background: #e0e0e0;
        /* Light hover background */
        color: #2e3436;
    }

    .gtk-dropdown .menu-item:active {
        background: #4a90d9;
        /* Active selection color (Adwaita light blue) */
        color: white;
    }

    .gtk-dropdown .menu-separator {
        background: #d3d7cf;
        /* Light separator */
    }
}

/* Common styles (both modes) */
.gtk-dropdown .menu-item {
    padding: 8px 16px;
    cursor: default;
    transition: all 0.2s ease;
}

.gtk-dropdown .menu-item:hover {
    background: #4C5157;
    /* Dark hover background */
    color: #FFFFFF;
}

.gtk-dropdown .menu-item:active {
    background: #729FCF;
    /* Dark active background */
    color: white;
}

.gtk-dropdown .menu-separator {
    height: 1px;
    margin: 4px 0;
    background: #555753;
    /* Dark separator */
    border: none;
}

/* GTK3-style scrollbar - updated for visibility */
::-webkit-scrollbar {
    width: 12px;
    height: 12px;
    background-color: transparent;
}

::-webkit-scrollbar-track {
    background-color: transparent;
    border-radius: 8px;
    margin: 3px;
}

::-webkit-scrollbar-thumb {
    background-color: #919191;
    border: 3px solid var(--window-bg-color);
    border-radius: 8px;
    min-height: 40px;
}

::-webkit-scrollbar-thumb:hover {
    background-color: #757575;
    margin: 3px;
}

::-webkit-scrollbar-thumb:active {
    background-color: #666666;
}

ul {
    list-style-type: none;
}

.fadeout-control {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
}

.fadeout-ui {
    display: flex;
    align-items: center;
    gap: 6px;
}

.fadeout-input {
    width: 60px;
    padding: 4px 8px;
    border: 1px solid var(--border-color);
    border-radius: var(--adw-radius-sm);
    background-color: var(--card-bg-color);
    color: var(--window-fg-color);
    font-size: 13px;
    text-align: center;
}

.fadeout-input:focus {
    outline: 2px solid var(--accent-bg-color);
    outline-offset: 1px;
}

.fadeout-button {
    background: var(--accent-bg-color);
    color: white;
    border: none;
    border-radius: var(--adw-radius-sm);
    padding: 4px 10px;
    font-size: 13px;
    cursor: pointer;
    transition: background-color 120ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.fadeout-button:hover {
    background: var(--accent-bg-color-hover);
}


/* GNOME/GTK4 Style Toast Notification */
.gnome-osd-toast {
    position: absolute;
    top: 32px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 24px;
    border-radius: 99px;
    /* Pill shape */
    font-family: 'Cantarell', 'Inter', system-ui, sans-serif;
    /* GNOME standard fonts */
    font-size: 15px;
    font-weight: 600;
    opacity: 0;
    transition: opacity 0.25s ease, top 0.25s cubic-bezier(0, 0, 0.2, 1);
    z-index: 2147483647;
    /* Max z-index to stay on top */
    pointer-events: none;
    /* Let clicks pass through to video */
    user-select: none;
    backdrop-filter: blur(10px);
    /* Glass effect */
    white-space: nowrap;

    /* Default (Dark Mode) - Adwaita Dark */
    background-color: rgba(45, 45, 45, 0.95);
    color: #ffffff;
    box-shadow: 0 4px 14px rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Light Mode Override - Adwaita Light */
@media (prefers-color-scheme: light) {
    .gnome-osd-toast {
        background-color: rgba(255, 255, 255, 0.95);
        color: #2e3436;
        /* GNOME Dark Slate */
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.15);
        border: 1px solid rgba(0, 0, 0, 0.1);
    }
}

/* Animation State */
.gnome-osd-toast.visible {
    opacity: 1;
    top: 48px;
    /* Slide down slightly */
}

/* --- Video Wrapper and View Area Styling --- */
.video-wrapper {
    flex: 1;
    position: relative;
    overflow: hidden;
    /* This sets the background color for the empty state */
    background: var(--view-bg-color, #1d1d20);
}

#preview {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
    background: transparent;
    /* Ensure the video element itself is transparent */
}

/* --- Custom Controls Bar Styling (Adwaita Fidelity) --- */
.controls-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 8px 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    height: 48px;

    /* GTK-style flat, semi-transparent background - NO GRADIENT */
    background-color: color-mix(in srgb, var(--window-bg-color, black) 90%, transparent);
    backdrop-filter: blur(8px);
    border-top: 1px solid color-mix(in srgb, var(--border-color, white) 20%, transparent);
    color: var(--window-fg-color, white);

    transition: opacity 250ms ease-out, transform 250ms ease-out;
    /* Smooth animation */
    opacity: 0;
    /* Initially hidden */
    transform: translateY(100%);
    /* Start 100% of its height below its normal position */
    pointer-events: none;
    /* Disable interaction when hidden */
}

.video-wrapper:hover .controls-overlay {
    opacity: 1;
    /* Fully visible */
    transform: translateY(0);
    /* Return to its natural position at the bottom */
    pointer-events: auto;
    /* Re-enable interaction */
}

/* GTK Button Style */
.control-button {
    background: none;
    border: none;
    color: inherit;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    transition: background-color 75ms cubic-bezier(0, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.control-button:hover {
    background: color-mix(in srgb, currentColor 15%, transparent);
}

.control-button svg {
    width: 20px;
    height: 20px;
    fill: currentColor;
}

.timeline-slider {
    /* Set the overall height of the element to be large (e.g., 20px). 
       This is the total height that will register a click for seeking. */
    height: 20px;

    /* Ensure no unwanted vertical space from margins/padding */
    margin: 0;
    padding: 0;

    /* Ensure the slider uses all available width */
    width: 100%;

    cursor: pointer;
}

/* Style the TRACK to be small and centered within the larger 20px element */
.timeline-slider::-webkit-slider-runnable-track {
    /* The small, visible line height */
    height: 4px;

    /* Center the 4px track within the 20px element height: (20-4)/2 = 8px margin */
    margin-top: 8px;
    margin-bottom: 8px;

    /* Other visual styles (adjust as needed for your theme) */
    background: rgba(255, 255, 255, 0.3);
    border-radius: 999px;
}

/* Style the THUMB (Puck) to be correctly centered over the thin track */
.timeline-slider::-webkit-slider-thumb {
    /* Assuming your thumb is 16px tall (standard size or based on your volume slider) */
    /* Center it over the 4px track: -((16px - 4px) / 2) = -6px margin-top */
    margin-top: -6px;

    /* Ensure it has a strong z-index so it's easily visible/draggable */
    position: relative;
    z-index: 2;

    cursor: grab;
}

/* Time display */
.time-display {
    font-family: 'Adwaita', sans-serif;
    font-size: 14px;
    font-feature-settings: "tnum" 1;
    flex-shrink: 0;
}

/*
 * --- INTEGRATED HELP FILE STYLES ---
 * Adwaita-compliant styles for the help page.
 * NOTE: Variables like --adw-bg, --adw-card-bg, --adw-text are aliased
 * to the :root variables (--window-bg-color, --card-bg-color, --window-fg-color)
 * defined above.
 */

/* Mapping Adwaita vars used in the help file to the main.css :root variables */
:root {
    --adw-bg: var(--window-bg-color);
    --adw-card-bg: var(--card-bg-color);
    --adw-accent: var(--accent-bg-color);
    --adw-text: var(--window-fg-color);
    --adw-radius-sm: var(--adw-radius-sm);
    --adw-radius-lg: var(--adw-radius-lg);
    --spacing-s: var(--spacing-s);
    --spacing-l: var(--spacing-l);
    --spacing-xl: var(--spacing-xl);
}


/* Help Page Main Content Styles */
.help-page-main {
    padding: 24px;
    overflow-y: scroll;
    height: calc(100vh - 75px);
    background: var(--adw-bg);
    position: relative;
    box-sizing: border-box;
}

.content-section {
    background: var(--adw-card-bg);
    padding: var(--spacing-xl, 24px);
    border-radius: var(--adw-radius-lg, 12px);
    margin-bottom: var(--spacing-xl, 24px);
}

.help-page-main h1,
.help-page-main h2,
.help-page-main h3 {
    color: var(--adw-text);
    margin-top: 0;
}

.feature {
    background: var(--adw-bg);
    border-radius: var(--adw-radius-sm, 6px);
    padding: var(--spacing-l, 16px);
    margin-bottom: var(--spacing-l, 16px);
}

.tip {
    background: var(--adw-accent);
    /* FIX: Set to the theme's default light text color, ensuring contrast over dark accent. */
    color: #FFFFFF;
    border-radius: var(--adw-radius-sm, 6px);
    padding: var(--spacing-l, 16px);
    margin: var(--spacing-l, 16px) 0;
}

.help-page-main ul,
.help-page-main ol {
    padding-left: var(--spacing-xl, 24px);
}

.help-page-main li {
    margin-bottom: var(--spacing-s, 8px);
}

/* Table of Contents styles */
.toc {
    background: var(--adw-bg);
    border-radius: var(--adw-radius-sm, 6px);
    padding: var(--spacing-l, 16px);
    margin-bottom: var(--spacing-xl, 24px);
}

.toc ul {
    list-style-type: none;
    padding-left: 0;
}

.toc li {
    margin-bottom: var(--spacing-s, 8px);
}

.toc a {
    color: var(--adw-accent);
    text-decoration: none;
    -webkit-user-drag: none;
}

.toc a:hover {
    text-decoration: underline;
}

/* GTK3-style scrollbar for Help Page (Keeping the light mode default for all scrollbars) */
/* The main scrollbar styles are already defined earlier in the file, which should apply here too. */

/* Dark mode scrollbar specific overrides (already defined in the main file) */
@media (prefers-color-scheme: dark) {
    ::-webkit-scrollbar-thumb {
        background-color: #919191;
        border: 3px solid var(--window-bg-color);
    }
}

/* --- GTK-Style Repeat Button (#mediaWindowRepeatButton) --- */
#mediaWindowRepeatButton {
    /* Inherit base button styles (size, padding, corners) */
    background-color: transparent;
    border: none;
    color: #dfdfdf;
    /* Default icon color (white/light gray) */
    cursor: pointer;
    padding: 0;
    margin: 0 5px;
    transition: all 0.15s ease-in-out;
}

#mediaWindowRepeatButton:hover {
    /* GTK-style hover color */
    color: #4c4c4c;
}

/* Style for when the loop is active (visually pressed/toggled) */
#mediaWindowRepeatButton.active {
    /* GTK-style accent color for active state */
    color: #4c4c4c;
    /* Slight background change for active state */
    background-color: #6a6a6a;
    border-radius: 4px;
}

.gtk-volume-inline {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-left: 8px;
}

/* Adwaita symbolic button */
#gtkVolBtn svg {
    width: 18px;
    height: 18px;
    fill: currentColor;
}

/* ===================================================
   GTK4-STYLE VOLUME CONTROL CSS (Final with all fixes)
   =================================================== */

/* Container for the Volume Popover (Acts as the interaction area) */
.gtk-volume-popover {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Container for the vertical slider that 'pops' up */
.gtk-volume-slider-container {
    position: absolute;
    bottom: 100%;

    /* Centering Fix 1: Use Flexbox to center the slider inside the container */
    display: flex;
    justify-content: center;

    /* Ensure the container itself is centered above the button */
    left: 50%;
    transform: translateX(-50%);

    /* ðŸ›‘ FIX: Padding adjusted to make the thumb align with the top edge */
    padding: 8px 5px 10px 5px;
    /* Top: 8px (half of 16px thumb), Bottom: 10px */
    height: 128px;
    /* Adjusted height: 120 + 8 = 128px */
    width: 30px;

    background: rgba(40, 40, 40, 0.9);
    border-radius: 6px;
    margin-bottom: 5px;

    opacity: 0;
    pointer-events: none;
    transform: translate(-50%, 10px);
    transition: opacity 0.2s ease-out, transform 0.2s ease-out;
}

/* Show the slider container on hover/focus of the PARENT GROUP */
.gtk-volume-popover:hover .gtk-volume-slider-container,
.gtk-volume-popover:focus-within .gtk-volume-slider-container {
    opacity: 1;
    pointer-events: auto;
    transform: translate(-50%, 0);
}

/* Create the Connecting Triangle (Totem-style) */
.gtk-volume-slider-container::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);

    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 8px solid rgba(40, 40, 40, 0.9);

    opacity: inherit;
    transition: opacity 0.2s ease-out;
}

/* ---------------------------------------------------
   VERTICAL SLIDER STYLES (.gtk-volume-slider-vertical)
   --------------------------------------------------- */

.gtk-volume-slider-vertical {
    -webkit-appearance: none;
    appearance: none;
    width: 4px;
    /* Height remains 100% of the adjusted container height */
    height: 100%;

    background: rgba(255, 255, 255, 0.3);
    border-radius: 999px;
    cursor: pointer;

    /* 100% at Top Fix: Reverse the vertical direction */
    transform: rotate(180deg);

    writing-mode: vertical-lr;
}

/* Vertical Slider Track (Webkit) */
.gtk-volume-slider-vertical::-webkit-slider-runnable-track {
    width: 4px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.3);
}

/* Vertical Slider Thumb (GTK style) */
.gtk-volume-slider-vertical::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;

    width: 16px;
    height: 16px;

    background: white;
    border-radius: 50%;

    /* Centering: Centers the 16px thumb on the 4px track after 180deg rotation */
    margin-top: -6px;
    margin-left: -6px;

    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 0, 0, 0.05);
    transition: all 0.2s ease-out;
}

/* HOVER State */
.gtk-volume-slider-vertical::-webkit-slider-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 0, 0, 0.1);
}

/* FOCUS State (GTK blue ring) */
.gtk-volume-slider-vertical:focus::-webkit-slider-thumb {
    box-shadow: 0 0 0 3px rgba(52, 131, 235, 0.5),
        0 1px 2px rgba(0, 0, 0, 0.2);
}